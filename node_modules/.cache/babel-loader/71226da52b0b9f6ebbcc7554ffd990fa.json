{"ast":null,"code":"import { __rest } from 'tslib';\nimport { resize } from '../resize/index.es.js';\nimport { createScrollInfo } from './info.es.js';\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\nconst scrollListeners = new WeakMap();\nconst resizeListeners = new WeakMap();\nconst onScrollHandlers = new WeakMap();\n\nconst getEventTarget = element => element === document.documentElement ? window : element;\n\nfunction scroll(onScroll) {\n  let _a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var {\n    container = document.documentElement\n  } = _a,\n      options = __rest(_a, [\"container\"]);\n\n  let containerHandlers = onScrollHandlers.get(container);\n  /**\r\n   * Get the onScroll handlers for this container.\r\n   * If one isn't found, create a new one.\r\n   */\n\n  if (!containerHandlers) {\n    containerHandlers = new Set();\n    onScrollHandlers.set(container, containerHandlers);\n  }\n  /**\r\n   * Create a new onScroll handler for the provided callback.\r\n   */\n\n\n  const info = createScrollInfo();\n  const containerHandler = createOnScrollHandler(container, onScroll, info, options);\n  containerHandlers.add(containerHandler);\n  /**\r\n   * Check if there's a scroll event listener for this container.\r\n   * If not, create one.\r\n   */\n\n  if (!scrollListeners.has(container)) {\n    const listener = () => {\n      const time = performance.now();\n\n      for (const handler of containerHandlers) handler.measure();\n\n      for (const handler of containerHandlers) handler.update(time);\n\n      for (const handler of containerHandlers) handler.notify();\n    };\n\n    scrollListeners.set(container, listener);\n    const target = getEventTarget(container);\n    window.addEventListener(\"resize\", listener, {\n      passive: true\n    });\n\n    if (container !== document.documentElement) {\n      resizeListeners.set(container, resize(container, listener));\n    }\n\n    target.addEventListener(\"scroll\", listener, {\n      passive: true\n    });\n  }\n\n  const listener = scrollListeners.get(container);\n  const onLoadProcesss = requestAnimationFrame(listener);\n  return () => {\n    var _a;\n\n    if (typeof onScroll !== \"function\") onScroll.stop();\n    cancelAnimationFrame(onLoadProcesss);\n    /**\r\n     * Check if we even have any handlers for this container.\r\n     */\n\n    const containerHandlers = onScrollHandlers.get(container);\n    if (!containerHandlers) return;\n    containerHandlers.delete(containerHandler);\n    if (containerHandlers.size) return;\n    /**\r\n     * If no more handlers, remove the scroll listener too.\r\n     */\n\n    const listener = scrollListeners.get(container);\n    scrollListeners.delete(container);\n\n    if (listener) {\n      getEventTarget(container).removeEventListener(\"scroll\", listener);\n      (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n      window.removeEventListener(\"resize\", listener);\n    }\n  };\n}\n\nexport { scroll };","map":{"version":3,"names":["__rest","resize","createScrollInfo","createOnScrollHandler","scrollListeners","WeakMap","resizeListeners","onScrollHandlers","getEventTarget","element","document","documentElement","window","scroll","onScroll","_a","container","options","containerHandlers","get","Set","set","info","containerHandler","add","has","listener","time","performance","now","handler","measure","update","notify","target","addEventListener","passive","onLoadProcesss","requestAnimationFrame","stop","cancelAnimationFrame","delete","size","removeEventListener"],"sources":["C:/Users/bittu/Desktop/React-Unit4-Project/premium-grade-140/node_modules/@motionone/dom/dist/gestures/scroll/index.es.js"],"sourcesContent":["import { __rest } from 'tslib';\r\nimport { resize } from '../resize/index.es.js';\r\nimport { createScrollInfo } from './info.es.js';\r\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\r\n\r\nconst scrollListeners = new WeakMap();\r\nconst resizeListeners = new WeakMap();\r\nconst onScrollHandlers = new WeakMap();\r\nconst getEventTarget = (element) => element === document.documentElement ? window : element;\r\nfunction scroll(onScroll, _a = {}) {\r\n    var { container = document.documentElement } = _a, options = __rest(_a, [\"container\"]);\r\n    let containerHandlers = onScrollHandlers.get(container);\r\n    /**\r\n     * Get the onScroll handlers for this container.\r\n     * If one isn't found, create a new one.\r\n     */\r\n    if (!containerHandlers) {\r\n        containerHandlers = new Set();\r\n        onScrollHandlers.set(container, containerHandlers);\r\n    }\r\n    /**\r\n     * Create a new onScroll handler for the provided callback.\r\n     */\r\n    const info = createScrollInfo();\r\n    const containerHandler = createOnScrollHandler(container, onScroll, info, options);\r\n    containerHandlers.add(containerHandler);\r\n    /**\r\n     * Check if there's a scroll event listener for this container.\r\n     * If not, create one.\r\n     */\r\n    if (!scrollListeners.has(container)) {\r\n        const listener = () => {\r\n            const time = performance.now();\r\n            for (const handler of containerHandlers)\r\n                handler.measure();\r\n            for (const handler of containerHandlers)\r\n                handler.update(time);\r\n            for (const handler of containerHandlers)\r\n                handler.notify();\r\n        };\r\n        scrollListeners.set(container, listener);\r\n        const target = getEventTarget(container);\r\n        window.addEventListener(\"resize\", listener, { passive: true });\r\n        if (container !== document.documentElement) {\r\n            resizeListeners.set(container, resize(container, listener));\r\n        }\r\n        target.addEventListener(\"scroll\", listener, { passive: true });\r\n    }\r\n    const listener = scrollListeners.get(container);\r\n    const onLoadProcesss = requestAnimationFrame(listener);\r\n    return () => {\r\n        var _a;\r\n        if (typeof onScroll !== \"function\")\r\n            onScroll.stop();\r\n        cancelAnimationFrame(onLoadProcesss);\r\n        /**\r\n         * Check if we even have any handlers for this container.\r\n         */\r\n        const containerHandlers = onScrollHandlers.get(container);\r\n        if (!containerHandlers)\r\n            return;\r\n        containerHandlers.delete(containerHandler);\r\n        if (containerHandlers.size)\r\n            return;\r\n        /**\r\n         * If no more handlers, remove the scroll listener too.\r\n         */\r\n        const listener = scrollListeners.get(container);\r\n        scrollListeners.delete(container);\r\n        if (listener) {\r\n            getEventTarget(container).removeEventListener(\"scroll\", listener);\r\n            (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\r\n            window.removeEventListener(\"resize\", listener);\r\n        }\r\n    };\r\n}\r\n\r\nexport { scroll };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}